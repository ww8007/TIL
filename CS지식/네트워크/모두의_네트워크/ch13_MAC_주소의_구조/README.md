# 13. MAC 주소의 구조

- 랜 카드 제조할 때 정애히즌 물리적인 주소

## 목차

- [13. MAC 주소의 구조](#13-mac-주소의-구조)
  - [목차](#목차)
  - [13.1 MAC 주소란?](#131-mac-주소란)
    - [MAC 주소를 사용한 통신](#mac-주소를-사용한-통신)
  - [정리](#정리)

## 13.1 MAC 주소란?

- 랜 카드 : 비트열(0, 1)을 전기 신호로 변환
- ┣ MAC 주소라는 번호가 정해져 있음
- ┣ 제조할 때 새겨지기 때문에 물리 주소라고도 불림
- ┗ 전 세계에서 유일한 번호가 할당되게 됨

> 중복이 절대 되지 않음 → 규칙이 명확함

- MAC 주소 : 48 비트 숫자로 구성
- ┣ `앞쪽 24비트` : 랜 카드를 만든 `제조사 번호`
- ┗ `뒤쪽 24비트` : 제조사가 `랜 카드에 붙인 일련번호`

### MAC 주소를 사용한 통신

- `OSI 모델`, `TCP/IP 모델`을 떠올려 보면
- ┣ `각 계층에서 헤더`를 붙이게됨
- ┣ `OSI 모델` : `데이터 링크 계층`에 해당
- ┣ `TCP/IP` : `네트워크 계층`에 해당
- ┗ 이 계층 → `이더넷 헤더와 트레일러`를 붙임

- `이더넷 헤더` :
- ┣ 1. `목적지`의 MAC 주소(6바이트)
- ┣ 2. `출발지`의 MAC 주소(6바이트)
- ┣ 3. `유형(2바이트)`
- ┗ 이렇게 총 `14바이트로 구성되어 있음`

- 그럼 유형이란?

- `이더넷 유형(Ethernet type)` : `이더넷으로 전송`되는
- ┣ `상위 계층 프로토콜의 종류`를 나타냄`(OSI 네트워크 계층)`
- ┗ 다음 표에 나와 있는 `프로콜을 식별하는 16진수 번호`가 들어감

| 유형 번호 | 프로토콜           |
| --------- | ------------------ |
| 0800      | IPv4               |
| 0806      | ARP                |
| 8035      | RARP               |
| 814C      | SNMP over Ethernet |
| 86DD      | IPv6               |

- 유형 번호를 기억할 필요는 없지만
- ┗ `유형` → 프로토콜 종류를 `식별하는 번호`가 들어감

- 이데넛 헤더 외에 : `데이터 뒤`에
- ┣ 추가하는 것을 `트레일러`
- ┣ `FSC(Frame Check Sequence)`라고도 함
- ┗ 데이터 전송 도중에 `오류가 발생하는지 확인` 하는 용도

- 이더넷 헤더와 트레일러가 추가된 데이터 : 프레임
- ┣ 네트워크를 통해서 → 프레임이 전송되게 됨
- ┣ ex) 컴퓨터 1 → 컴퓨터 3으로 데이터를 보낸다고 가정
- ┣ 컴퓨터 1 : `이더넷 헤더`에 데이터의 목적지인
- ┣ 컴퓨터 3의 MAC 주소(`목적지 MAC 주소`)와
- ┣ 자신의 MAC 주소(`출발지 MAC 주소`)
- ┗ 정보를 넣고 `데이터를 전송`함

> 여기서 캡슐화가 일어남

- 보내는 측의 컴퓨터 1에서 `캡슐화`가 일어남
- ┣ 데이터 링크 계층에서 1. `데이터`에 `이더넷 헤더`와
- ┣ `트레일러`를 `추가`하여 `프레임`을 만들고
- ┣ 물리 계층에서 이 프레임 비트열 : 전기 신호로 변환하여
- ┗ `네트워크를 통해 전송`하는 것

> 데이터의 경우 모든 포트로 전송이 일어나게 되지만
> 자신의 MAC 주소와 다른 경우 : 데이터를 파기함

- `캡슐화` → `역캡슐화`
- ┣ `물리 계층` : `전기 신호로 전송된 데이터`를
- ┣ `비트열로 변환`하고, 데이터 링크 계층에서
- ┗ `이더넷 헤더와 트레일러를 분리`

> 만약 데이터를 동시에 전달 → 충돌을 방지하기 위해
> CSMA/CD 방식이 사용됨

- 여기에서는 `총돌이 감지`되면 `컴퓨터 2는 잠시 대기` 하고
- ┗ 데이터를 전송함

## 정리

1. `MAC 주소` : `48비트(6바이트) 숫자`로 구성

   - ┣ 앞쪽 24 : 랜 카드를 만든 `제조사 번호`
   - ┗ 뒤쪽 24 : 제조사가 `랜 카드에 붙인 일련번호`

2. `이더넷 헤더` : 1. `목적지` MAC 주소(6바이트),

   - ┣ 2. `출발지` MAC 주소(6바이트)
   - ┣ 3. `유형` (2바이트)
   - ┗ 총 14바이트로 구성됨

3. 데이터 링크 계층 : 데이터 뒤에 추가하는 것 → `트레일러`
