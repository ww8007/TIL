# 31. 메일 서버의 구조

- 응용 계층 : 메일을 송/수신 하기위한 프로토콜이 존재

## 목차

- [31. 메일 서버의 구조](#31-%EB%A9%94%EC%9D%BC-%EC%84%9C%EB%B2%84%EC%9D%98-%EA%B5%AC%EC%A1%B0)
  - [31.1 메일의 송/수신 구조](#311-%EB%A9%94%EC%9D%BC%EC%9D%98-%EC%86%A1%EC%88%98%EC%8B%A0-%EA%B5%AC%EC%A1%B0)
  - [31.2 SMTP에 의한 메일 송신과 메일 전송](#312-smtp%EC%97%90-%EC%9D%98%ED%95%9C-%EB%A9%94%EC%9D%BC-%EC%86%A1%EC%8B%A0%EA%B3%BC-%EB%A9%94%EC%9D%BC-%EC%A0%84%EC%86%A1)
  - [31.3 POP3에 의한 메일 수신](#313-pop3%EC%97%90-%EC%9D%98%ED%95%9C-%EB%A9%94%EC%9D%BC-%EC%88%98%EC%8B%A0)
  - [ping 명령](#ping-%EB%AA%85%EB%A0%B9)
  - [31. 정리](#31-%EC%A0%95%EB%A6%AC)

## 31.1 메일의 송/수신 구조

- `메일의 송/수신` :
- ┣ `client 측`의 `메일 프로그램`과
- ┣ `server 측`의 `메일 서버 프로그램간`의
- ┗ 통신을 하게됨 → 여기서 사용되는 `2가지의 프로토콜`

- 메일을 `보내는 데` 사용되는 프로토콜
- ┣ : SMTP → 25번 포트 사용
- ┣ 메일을 `받는 데` 사용되는 프토토콜
- ┗ : POP3 → 110번 포트 사용

> SMTP의 경우 메일 서버 간의 메일 전송에도 이용

- 순서대로 메일의 송/수신에 대해서 학습

1. 컴퓨터 1의 사용자 :

- ┣ `메일 서버 1`을 사용함
- ┣ 보통 포털사이트, 회사의 메일 서버 사용
- ┣ 메일을 보낼 때 : `회사의 메일 서버에 메일`을 보냄
- ┣ 메일 프로그램에 메일 서비스를 제공하는
- ┣ `호스트 이름(서버 이름)을 설정`하면 됨
- ┗ `메일 서버1로 메일을 보낼 수 있음`

## 31.2 SMTP에 의한 메일 송신과 메일 전송

- 컴퓨터 1과 메일 서버 1간의 통신에 대해서 자세하게 학습

- 컴퓨터 1의 메일 프로그램의 경우
- ┗ SMTP를 사용하여 → 메일 서버 1로 메일을 송신

1. `세션 시작`을 통지
2. `송신자의 메일 주소`를 통지
3. `목적지 메일 주소`를 통지
4. `메일 본문 전송`을 통지
5. `메일 본문`을 `송신`
6. `세션 종료` 통지

> 이 이후 SMTP를 이용하여서 메일 서버 1 → 메일 서버 2로 메일 전송

## 31.3 POP3에 의한 메일 수신

- SMTP로 메일 서버 1이 메일 서버 2로 메일을 전송 가능
- ┣ 메일 서버 : `메가 박스`라고 `메일 보관 기능 존재`
- ┣ 메일 서버2 POP3를 사용하여 메일 서버 2의 메일 박스에서
- ┣ 메일을 가져와서 컴퓨터 2로 전송
- ┣ 메일을 수신할 때 : 사용자의 이름과 비밀번호를 이용한
- ┗ `사용자 인증이 필요하니 주의`

1. 세션을 시작
2. 컴퓨터 2 : 받는 사람의 사용자 이름을 통지

- ┣ 메일 서버 2에 `OK`라는 확인 `응답을 반환`

3. 컴퓨터 2 : 수신사의 비밀번호를 통지하고

- ┣ 메일 서버2에 `비밀번호 확인` 확인 `응답을 반환`

4. 컴퓨터 2 : 자신의 메일이 있는지 확인하고

- ┣ 메일 서버2는 메일 `있음` 이라는 `응답을 반환`

5. 컴퓨터 2 : 메일 박스에 보관된 이메일을 전송받음
6. 세션 종료

## ping 명령

- 목적지 컴퓨터와 통신을 확인 : ping 명령을 이용
- ┣ ping 명령 : `ICMP(Internet Control Message Protocol)`
- ┣ 라는 프로토콜을 사용하여 목적지 컴퓨터에
- ┣ ICMP 패킷을 전송하고 → `패킷에 대한 응답이 제대로 오는지`
- ┗ 확인하는 역할을 함

- ping 명령이 정상적으로 실행되면 :
- ┣ 네트워크 연결이 정상이라고 판단할 수 있으므로
- ┗ 문제를 확인할 때 자주 사용

```docs
ping 목적지 IP 주소
ping 목적지 호스트 이름
```

## 31. 정리

1. 메일 송신 : `SMTP (프로토콜) 25번 포트` 사용

2. 메일 수신 : `POP3 (프로토콜) 110번 포트` 사용

3. 메일 서버간 : `SMTP를 사용하여 메일을 전송`

4. 메일 서버 : 메일 박스가 있는데 여기에 메일이 보관
