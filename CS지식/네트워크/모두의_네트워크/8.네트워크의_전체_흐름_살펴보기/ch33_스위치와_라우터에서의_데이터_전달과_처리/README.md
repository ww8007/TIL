# 33. 스위치와 라우터에서의 데이터 전달과 처리

- 스위치와 라우터에서의 데이터가 처리되는 과정

## 목차

- [33. 스위치와 라우터에서의 데이터 전달과 처리](#33-%EC%8A%A4%EC%9C%84%EC%B9%98%EC%99%80-%EB%9D%BC%EC%9A%B0%ED%84%B0%EC%97%90%EC%84%9C%EC%9D%98-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%84%EB%8B%AC%EA%B3%BC-%EC%B2%98%EB%A6%AC)
  - [33.1 스위치에서의 데이터 전달과 처리](#331-%EC%8A%A4%EC%9C%84%EC%B9%98%EC%97%90%EC%84%9C%EC%9D%98-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%84%EB%8B%AC%EA%B3%BC-%EC%B2%98%EB%A6%AC)
  - [33.2 라우터에서의 데이터 전달과 처리](#332-%EB%9D%BC%EC%9A%B0%ED%84%B0%EC%97%90%EC%84%9C%EC%9D%98-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%84%EB%8B%AC%EA%B3%BC-%EC%B2%98%EB%A6%AC)
  - [33. 정리](#33-%EC%A0%95%EB%A6%AC)

## 33.1 스위치에서의 데이터 전달과 처리

- 스위치의 경우
- ┣ `데이터 링크 계층`에서
- ┣ `데이터를 전기 신호로 변환`하여
- ┗ 라우터 A로 전송함

> 데이터 링크 계층

| 목적지 <br/> MAC 주소     | 출발지 <br/> MAC 주소   | 기타 | 출발지 <br/> IP 주소 | 목적지 <br/> IP 주소 | 기타 | 출발지 <br/> 포트 번호 | 목적지 <br/> 포트 번호 | 기타 | html <br/> 데이터를 보내주세요 | FCS |
| ------------------------- | ----------------------- | ---- | -------------------- | -------------------- | ---- | ---------------------- | ---------------------- | ---- | ------------------------------ | --- |
| A 라우터의 <br/> MAC 주소 | 컴퓨터의 <br/> MAC 주소 | 기타 | 192.168.1.10         | 192.168.10.5         | 기타 | 3500                   | 80                     | 기타 |                                | FCS |

- `물리 게층` :
- ┣ 컴퓨터에서 들어온 데이터가
- ┗ `전기 신호로 변환되어 전달`됨

- 라우터 A :
- ┣ 데이터를 전기 신호로
- ┗ 변환하여 전송함

## 33.2 라우터에서의 데이터 전달과 처리

- 계속해서 데이터 : 스위치 A에서
- ┗ 라우터 A로 `전기 신호로 전달됨`

> 라우터 A 에서의 캡슐화와 역캡슐화

- 스위치 A에서 데이터가 `전기 신호로 변환`되어
- ┣ 케이블을 통해 흘러가 `라우터 A에 도착`하면
- ┣ `라우터 A` : `데이터 링크 계층`에서
- ┣ 이더넷 프레임의 `목적지 MAC 주소`와
- ┗ `자신의 MAC 주소`를 `비교`하게됨

- 만약 이 과정에서 주소가 같다면
- ┣ 이더넷 헤더와 트레일러를 분리하는
- ┗ 역캡슐화 과정을 수행함

- 다음으로 네트워크 계층에 전달하고
- ┣ 자신의 1. `라우팅 테이블`
- ┗ 2. `목적지 IP 주소`를 비교함

> 네트워크 계층

| 출발지 <br/> IP 주소 | 목적지 <br/> IP 주소 | 기타 | 출발지 <br/> 포트 번호 | 목적지 <br/> 포트 번호 | 기타 | html <br/> 데이터를 <br/> 보내주세요 |
| -------------------- | -------------------- | ---- | ---------------------- | ---------------------- | ---- | ------------------------------------ |
| 192.168.1.10         | 192.18.10.5          | 기타 | 3500                   | 80                     | 기타 |                                      |

> 데이터 링크 계층

| 목적지 <br/> MAC 주소     | 출발지 <br/> MAC 주소   | 기타 |
| ------------------------- | ----------------------- | ---- |
| A 라우터의 <br/> MAC 주소 | 컴퓨터의 <br/> MAC 주소 | 기타 |

- 위와 같은 방식으로 분리를 진행함

> 물리 계층

- 스위치 A로부터 데이터가
- ┗ 전기 신호로 변환되어 전송됨

- 라우터 A의 `라우팅 테이블`에서
- ┣ `목적지 IP 주소의 경로`를 알 수 있기 때문에
- ┣ `라우팅`을 할 수 있음
- ┣ 현재 출발지의 주소 → `외부 IP 주소`
- ┗ (실제로는 왠(WAN)측) `IP 주소로 변경`함

- 그 다음 데이터 : 전기 신호 형태로
- ┣ 라우터 A에서 → 라우터 B로 전달이됨
- ┗ 다음으로 라우터 B에서 이루어지는 OSI 캡슐화, 역캡슐화

- 데이터가 전기 신호로 변환되어 케이블을 통해
- ┣ 라우터 A에서 → 라우터 B로 `전달이 이루어지 되면`
- ┣ 라우터 B : `이더넷 프레임의 목적지 MAC`,
- ┣ `자신의 MAC 주소를 비교`하게됨
- ┣ 주소가 `같으면` `이더넷 헤더`와
- ┗ `트레일러를 분리`하는 `역캡슐화를 진행`하게 됨

- 라우터 A와 마찬가지로
- ┣ 라우팅 테이블을 확인하게 됨
- ┗ 라우터 A와 마찬가지로 `목적지의 네트워크를 알아야함`

- 라우터 B의 `라우팅 테이블`에서
- ┣ `목적지 IP 주소의 경로`를 알 수 있기 때문에
- ┣ `라우팅`을 할 수 있음
- ┣ 현재 출발지의 주소 → `외부 IP 주소`
- ┗ (실제로는 왠(WAN)측) `IP 주소로 변경`함

- 그 다음 데이터 링크 계층에 전달하여
- ┣ 스위치에 전달되도록 1. `이더넷 헤더`와
- ┣ 2. `트레일러(FCS)`를 붙인 후
- ┣ 물리 계층에서 `데이터를 전기 신호로 변환`하여
- ┗ `네트워크로 전달`함

- `전기 신호의 형태의 데이터`가
- ┗ 라우터 B → 스위치 B로의 전달이 됨

- 스위치 B : 전기 신호를 데이터 링크 계층에서
- ┗ 처리하고 `웹 서버에 데이터를 전기 신호로 전달`함

## 33. 정리

1. `스위치` 내에 대응되는 OSI 모델의 계층 :

- ┣ 1 ) `물리 계층`
- ┗ 2 ) `네트워크 계층`

2. `라우터` 내에 대응되는 OSI 모델의 계층 :

- ┣ 1 ) `물리 계층 `
- ┣ 2 ) `데이터 링크 계층`
- ┗ 3 ) `네트워크 계층`
