# 8. 캡슐화와 역캡슐화

- 데이터를 송신할 때는 캡슐화와 역캡슐화가 이루어짐

## 8.1 캡슐화와 역캡슐화란?

- `데이터를 전송`하기 위해서는
- ┣ `데이터 앞부분`에 `전송하는데 필요한 정보`를 붙여서
- ┗ 다음 `계층(레이어)`로 보내야함
- ┣ 이 정보 → 헤더
- ┗ `헤더` : 데이터를 전달받을 `상대방에 대한 정보도 포함

- `캡슐화` : 헤더를 붙여 나가는 것
- ┣ `역캡슐화` : 헤더를 하나씩 제거
- ┣ 일반적으로 5(세션), 6(표현)계층의 경우
- ┗ 7(응용) 계층인 응용 계층에 포함하여 생각할 수 있음

- OSI 모델로 캡슐화와 역캡슐화의 과정을 설명

- `데이터 송신 측`
- ┣ `1. 응용 계층` : 웹 사이트를 접속하기 위한 `요청 데이터`
- ┣ `2. 전송 계층` : 데이터를 전달 받고 `전송 계층`에서 `신뢰 할 수 있는`
- ┣ `통신`을 위해서 `응용 계층`에서 만들어진 `데이터에 헤더를 붙임`
- ┣ `3. 네트워크 계층` : `전송 계층에서 만들어진` 데이터를 다른 네트워크
- ┣ 와의 통신을 위해서 `헤더를 붙임`, `물리적인 통신 채널`을 연결하기 위해
- ┗ `4. 데이터 링크 계층` : `헤더`, `트레일러`를 붙임

> 트레일러 : 데이터를 전달할 때 데이터의 마지막에 추가하는 정보

- 전송, 네트워트, 데이터, 계층 헤더가 차례로 생성되어 붙고
- ┗ 트레일러는 마지막 데이터 링크 계층에서 추가된다.

- `데이터 링크 계층`에서 만들어진 데이터는 `최종적`으로
- ┣ `전기 신호로 변횐`되어 `수신 측에 도착`
- ┗ 이렇게 필요한 데이터를 추가해 나가는 것을 → `캡슐화`

- `데이터 수신 측`
- ┣ 송신과 반대로 생각하면 됨
- ┣ `데이터 링크` : 헤더, 트레일러 제거 → 네트워크 계층 전송
- ┣ `네트워크` : 헤더 제거 → 전송 게층 전송
- ┣ `전송` : 헤더 제거 → 응용 계층 전송
- ┗ `웹 사이트 요청 데이터 수신`

## VPN

- `VPN` : `Virtual Private Network` - 가상 시설망의 약어
- ┣ 가상 통신 터널을 만들어 기업 본사, 자사 연결, 통신
- ┣ 외부 → 인터넷으로 사내에 접속하는 것을 말함
- ┗ `VPN`은 `2 종류`로 구성 되어있음

- 인터넷 `VPN`에는 `거점 간 접속`, `원격 접속 연결`이 존재
- ┣ `일반 인터넷망`을 사용
- ┣ 1. `거점 간 접속` : `IPsec`이라는 `암호 기술 프로토콜` 사용
- ┣ 2. `원격 접속 연결` : `외부`에서 사용하는 `컴퓨터`와 `사내 컴퓨터` 연결
- ┗ `암호화된 통신로`를 만듬

- `IP-VPN`
- ┣ `IP-VPN` : `MPLS`라는 기술을 사용
- ┣ 인터넷망이 아닌 `통신 사업자 전용 폐쇄망`을 사용
- ┣ `MPLS는 폐쇠망`을 사용하기 때문에
- ┣ 제삼자에 의한 해킹이나 데이터 변조의 위험이 없음
- ┗ 별도의 암호화 기능이 필요하지 않음

## 정리

1. 데이터를 보낼 때는 필요한 정보를 데이터에 추가
   ┗ 이 정보를 헤더라고 함

2. 데이터를 상대방에게 보낼 때 각 계층에서

   - ┣ 헤더(데이터 링크 계층의 트레일러도 포함)를
   - ┗ 붙여서 나가는 것을 캡슐화

3. 데이터를 수신할 때 각 계층에서 헤더(트레일러 포함)

   - ┣ 를 하나씩 제거 해 나가는 것을
   - ┗ 역캡슐화라고 부름

4. OSI 모델에서 데이터 송신 측 :

   - ┣ 응용 → 전송 → 네트워크 → 데이터 링크 계층 순서로
   - ┣ 캡슐화가 진행됨
   - ┗ 반대로 수신의 경우 역순으로 역캡슐화

5. 송신 측의 데이터 링크 계층에서 만들어진 데이터가
   - ┗ 전기 신호로 변환되어 수신측에 전달
